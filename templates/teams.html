{%extends 'controller.html'%}
{%block content%}
{%include 'calendarview.html' with context%}
    <!--table-->
<div class="card mb-3">
  <div class="card-header">
    <i class="fas fa-table"></i>
    Teams Data Table 
  </div>
  
  <div class="card-body">

    <form id="teams_form" action="{{url_for('edit_team')}}" method="POST">
      <div class="table-responsive">
        <table class="table table-bordered text-center" id="teamstable" width="100%" cellspacing="0">
          {%set _rewTeams=teams.rewind()%}           
          {%for team in teams if not filtered or team._id==selected_team._id%}
          <thead>
            <tr>
              <th>{{team.name}}</th><th>Email</th><th>Role</th><th>Approver</th>
            </tr>
          </thead>
          <tfoot>
            <tr class="d-none"><th><input name="team" type="text" value="{{team._id}}"></th></tr>
          </tfoot>
          <tbody>
            <tr>
            {%if team.users is iterable%}
              {%for user in team.users%} 
                           
                <td>{{loop.index}}</td>
                <td>{{user.email}}</td>
                <td>{{user.role}}</td>
                {%if user.approver%}
                <td class="text-success">Yes</td>
                {%else%}
                <td class="text-danger">No</td>{%endif%}
              </tr>
                {%endfor%}      
          </tbody>
            {%endif%}
          {%endfor%} 
        </table>
      </div>
    </form>
  </div>
</div>
<script src="{{url_for('static',filename='vendor/jquery/jquery.min.js')}}"></script>
<script>
  $(document).ready(function(){
    $('#teamstable').DataTable();
  })
</script>
{%endblock content%}