{% extends 'base.html'%}

{%block controller%}

{%include 'breadcrumb.html' with context%}
  
<div class="row mb-5">
    <div class="col-xl-12 col-sm-12">
        <div class="card bg-light h-100">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link {%if not show_teams%} active {%endif%}" id="leave_request_menu" href="{{url_for('dashboard')}}">Leave Requests</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {%if show_teams%} active {%endif%}" id="manage_team_menu" href="{{url_for('teams')}}">Manage Teams</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                    </li>
                </ul>
            </div>
            <div class="card-body {%if show_teams%} d-none {%endif%}" id="leave_request">
                <div class="row">
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-info o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-user"></i>
                                </div>
                                <div class="mr-5">All Requests <span class="badge badge-pill badge-light ml-3">{{requests.all_requests}}</span></div>
                            </div>
                            <a id="all_requests" class="card-footer text-white clearfix small z-1" href="{{url_for('leave_requests_datatable',status='all_requests')}}">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-warning o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                                <i class="fas fa-fw fa-calendar-alt"></i>
                            </div>
                            <div class="mr-5"> New Requests <span class="badge badge-pill badge-light ml-3">{{requests.to_be_approved}}</span></div>
                        </div>
                            <a id="to_be_approved" class="card-footer text-white clearfix small z-1" href="{{url_for('leave_requests_datatable',status='to_be_approved')}}">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-success o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                            <i class="fas fa-fw fa-calendar-check"></i>
                            </div>
                            <div class="mr-5">Approved Requests <span class="badge badge-pill badge-light ml-3">{{requests.approved}}</span></div>
                        </div>
                        <a id="approved_requests" class="card-footer text-white clearfix small z-1" href="{{url_for('leave_requests_datatable',status='approved_requests')}}">
                            <span class="float-left">View Details</span>
                            <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                            </span>
                        </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-danger o-hidden h-100">
                            <div class="card-body">
                                
                                <div class="card-body-icon">
                                <i class="fas fa-fw fa-calendar-times"></i>
                                </div>
                                <div class="mr-5">Rejected Requests <span class="badge badge-pill badge-light ml-3">{{requests.rejected}}</span></div>
                            </div>
                            <a id="rejected_requests" class="card-footer text-white clearfix small z-1" href="{{url_for('leave_requests_datatable',status='rejected_requests')}}">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div class="card-body {%if not show_teams%} d-none {%endif%}" id="manage_team">
                <div class="row">   
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-info o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-users"></i>
                                </div>
                                <div class="mr-5">All Teams</div>
                            </div>
                            <a id="all_teams" class="card-footer text-white clearfix small z-1" href="{{url_for('teams')}}">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-success o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                                <i class="fas fa-fw fa-user-friends"></i>
                            </div>
                            <div class="mr-5">Select Team</div>
                        </div>
                            <a id="select_team" data-toggle="modal" data-target="#modal_select_team" class="card-footer text-white clearfix small z-1" href="#">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-dark bg-light o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                            <i class="fas fa-fw fa-user-plus"></i>
                            </div>
                            <div class="mr-5">Add new Team</div>
                        </div>
                        <a id="" class="card-footer text-dark clearfix small z-1" href="{{url_for('add_new_team')}}">
                            <span class="float-left">View Details</span>
                            <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                            </span>
                        </a>
                        </div>
                    </div>
                    <!-- <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-secondary o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                            <i class="fas fa-fw fa-users-cog"></i>
                            </div>
                            <div class="mr-5"> Edit Team</div>
                        </div>
                        <a id="" class="card-footer text-white clearfix small z-1" href="">
                            <span class="float-left">View Details</span>
                            <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                            </span>
                        </a>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal_select_team" tabindex="-1" role="dialog" aria-labelledby="label_modal_modal_select_team" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h5 class="modal-title" id="label_modal_modal_select_team">Select Team Modal</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal_approval_choice modal-body pb-0">
                <form class="text-center" action="{{url_for('teams')}}" method="POST">
                    <div class="form-row">
                        <div class="form-group col align-self-center">
                            <label class="w-50" for="team_select">Select Team</label>
                            <select class="form-control w-50 mx-auto" name="team" id="team_select">
                                {%for team in teams%}
                                <option>{{team.name}}</option>
                                {%endfor%}
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Confirm</button>
                </form>
            </div>
        </div>
    </div>
</div>
{%block content%}
{%endblock%}

<script src="{{url_for('static',filename='vendor/jquery/jquery.min.js')}}"></script>
<script>
    
    $(document).ready(function(){
        $("#leave_request_menu").click(function(){
            $(this).addClass("active");
            $("#manage_team_menu").removeClass("active");
            $("#leave_request").removeClass("d-none")
            $("#manage_team").addClass("d-none");

        })
        $("#manage_team_menu").click(function(){
            $(this).addClass("active");
            $("#leave_request_menu").removeClass("active");
            $("#leave_request").addClass("d-none");
            $("#manage_team").removeClass("d-none")
        })
        
    })
</script>    
{%endblock controller%}
    
    
